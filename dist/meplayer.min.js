!function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){(function(e){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function n(e){return"string"==typeof e?document.querySelector(e):e.toString().includes("HTMLDivElement")?e:document.querySelector(".meplayer")}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=r(1),l=r(2),s=t(l),o=r(3),c=t(o),u=r(4),d=t(u),m="object"==("undefined"==typeof window?"undefined":a(window))&&window.window===window?window:"object"==("undefined"==typeof e?"undefined":a(e))&&e.global===e?e:void 0;m.mePlayer=function(e){function t(){L.addEventListener("ended",function(){c.removeClass(S,"meplayer-isplaying")}),L.addEventListener("canplaythrough",function(){E=this.duration,setTimeout(function(){c.removeClass(S,"meplayer-isloading"),C.querySelector(".meplayer-duration-text").innerText=c.parseSec(E.toFixed(0))},1e3)}),L.addEventListener("durationchange",function(){E=this.duration}),L.addEventListener("timeupdate",function(){var e=L.currentTime.toFixed(0),t=L.currentTime.toFixed(3),r=100*(e/E);if(_.style.width=r.toFixed(2)+"%",T.innerText=c.parseSec(e),y&&p===i.THEME_DEFAULT){var n=s.currentIndex(t),a=M.querySelectorAll("p"),l=a[n-1],o=a[n],u=a[n+1];o.className.includes("meplayer-lyric-current")||(c.removeClass(M.querySelector(".meplayer-lyric-current"),"meplayer-lyric-current"),M.querySelector(".meplayer-lyric-pre")&&c.removeClass(M.querySelector(".meplayer-lyric-pre"),"meplayer-lyric-pre"),M.querySelector(".meplayer-lyric-next")&&c.removeClass(M.querySelector(".meplayer-lyric-next"),"meplayer-lyric-next"),c.addClass(o,"meplayer-lyric-current"),l&&c.addClass(l,"meplayer-lyric-pre"),u&&c.addClass(u,"meplayer-lyric-next"),M.style.webkitTransform="translateY(-"+20*n+"px)",M.style.transform="translateY(-"+20*n+"px)")}});var e;x.addEventListener("click",function(){L.paused?(L.play(),p!==i.THEME_DEFAULT||y||d.draw(),S.addEventListener("mousewheel",function(){var t=null,r=.05;return e=function(e){t&&clearTimeout(t),S.className.includes("meplayer-adjusting-volume")||c.addClass(S,"meplayer-adjusting-volume"),e.wheelDeltaY<0&&L.volume>r&&(L.volume-=r),e.wheelDeltaY>0&&L.volume<1-r&&(L.volume+=r),p===i.THEME_DEFAULT?b.style.width=100*L.volume+"%":q.querySelector("i").style.opacity=L.volume,e.preventDefault(),t=setTimeout(function(){c.removeClass(S,"meplayer-adjusting-volume")},1e3)}}())):(L.pause(),d.stop(),S.removeEventListener("mousewheel",e)),c.toggleClass(S,"meplayer-isplaying")}),w.addEventListener("click",function(e){var t=(e.pageX-c.getAbsLeft(this))/this.offsetWidth;_.style.width=100*t+"%",L.currentTime=(t*E).toFixed(0)})}function r(){L.paused&&L.play()}function a(){L.paused||L.pause()}function l(){function e(){r++,S.style.opacity-=t,S.style.opacity<=0&&(t*=-1,S.style.opacity=0,c.toggleClass(S,"meplayer-container-mini"),c.toggleClass(S,"meplayer-container")),S.style.opacity<1&&n>r?requestAnimationFrame(e):setTimeout(function(){c.removeClass(S,"meplayer-changing-theme")},500)}var t=.03,r=0,n=200;c.addClass(S,"meplayer-changing-theme"),p=p===i.THEME_DEFAULT?i.THEME_MINI:i.THEME_DEFAULT,e()}if(!e.music||!e.music.src)return void console.error("必须指定音乐地址哦~");var o=e.music,u=n(e.target),p=e.theme?e.theme:i.THEME_DEFAULT,y=o.lrc?!0:!1,v=o.cover?o.cover:"https://unsplash.it/78/?random",f=p===i.THEME_DEFAULT?"meplayer-container":"meplayer-container-mini",g=f+" "+(y?"meplayer-haslrc":"")+" meplayer-isloading",h='<div class="'+g+'">\n                             <audio src='+o.src+'></audio>\n                             <div class="meplayer-info">\n                             <div class="meplayer-info-cover"><img src='+v+' alt="cd-cover"></div>\n                             <div class="meplayer-meta">\n                             <div class="meplayer-meta-title">'+o.title+'</div>\n                             <div class="meplayer-meta-author">'+o.author+'</div>\n                             <div class="meplayer-meta-time-tick"><span class="meplayer-meta-time-tick-text"></span></div>\n                             </div>\n                             </div>\n                             <canvas class="meplayer-spectrum"></canvas>\n                             <div class="meplayer-lyric"><div class="meplayer-lyric-area"></div></div>\n                             <div class="meplayer-control"><div class="meplayer-control-play"><i class="icon-play"></i><i class="icon-pause"></i></div></div>\n                             <div class="meplayer-volume-bg"><div class="meplayer-volume"><i class="icon-volume"></i><div class="meplayer-volume-progress"></div></div></div>\n                             <div class="meplayer-duration"><i class="icon-clock"></i><span class="meplayer-duration-text">loading</span></div>\n                             <div class="meplayer-loadingsign"><i class="icon-spin animate-spin"></i>loading</div>\n                             <div class="meplayer-timeline-bg"><div class="meplayer-timeline"><div class="meplayer-timeline-passed"></div></div></div>\n                             </div>';u.innerHTML=h;var E,S=u.querySelector("."+f),L=u.querySelector("audio"),x=u.querySelector(".meplayer-control-play"),T=u.querySelector(".meplayer-meta-time-tick-text"),C=u.querySelector(".meplayer-duration"),w=u.querySelector(".meplayer-timeline"),_=u.querySelector(".meplayer-timeline-passed"),q=u.querySelector(".meplayer-volume"),b=u.querySelector(".meplayer-volume-progress"),M=u.querySelector(".meplayer-lyric-area"),A=u.querySelector(".meplayer-spectrum");L.preload="auto",y?(s.parse(o.lrc),s.render(M)):d.init(A),t(),m.mePlayer={play:r,pause:a,toggleTheme:l}}}).call(t,function(){return this}())},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="default",n="mini",a="meplayer-lyric-current",i="meplayer-lyric-next";t.THEME_DEFAULT=r,t.THEME_MINI=n,t.LYRIC_CURRENT_CLASS=a,t.LYRIC_NEXT_CLASS=i},function(e,t,r){"use strict";function n(e){for(var t=e.split("\n"),r=[],n=t.length,a=/\[(\d{2}):(\d{2})\.(\d{2,3})]/g,i=/\[(\d{2}):(\d{2})\.(\d{2,3})]/,s=0;n>s;s++){var o=t[s].match(a),c=t[s].replace(a,"").replace(/^\s+|\s+$/g,"");if(c&&null!=o)for(var u=o.length,d=0;u>d;d++){var m=i.exec(o[d]),p=60*m[1]+parseInt(m[2])+parseInt(m[3])/(2===(m[3]+"").length?100:1e3);r.push({time:p,text:c})}}return r.sort(function(e,t){return e.time-t.time}),l=r,r}function a(e){if(!l)return void console.error("未指定歌词文本！");for(var t="",r=0;r<l.length;r++)t+="<p>"+l[r].text+"</p>";e.innerHTML=t,e.querySelector("p").className=s.LYRIC_CURRENT_CLASS,e.querySelector("p + p").className=s.LYRIC_NEXT_CLASS}function i(e){if(e<l[0].time)return 0;for(var t=0,r=l.length;r>t&&!(e>=l[t].time&&(!l[t+1]||e<=l[t+1].time));t++);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.currentIndex=t.render=t.parse=void 0;var l,s=r(1);t.parse=n,t.render=a,t.currentIndex=i},function(e,t){"use strict";function r(e,t){if(e.classList)e.classList.toggle(t);else{var r=e.className.split(" "),n=r.indexOf(t);n>=0?r.splice(n,1):r.push(t),e.className=r.join(" ")}}function n(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function a(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function i(e){for(var t=e.offsetLeft;e.offsetParent;)e=e.offsetParent,t+=e.offsetLeft;return t}function l(e){var t=(e/60).toFixed(0),r=(e%60).toFixed(0),n=10>t?"0"+t:t,a=10>r?"0"+r:r;return n+":"+a}Object.defineProperty(t,"__esModule",{value:!0}),t.toggleClass=r,t.addClass=n,t.removeClass=a,t.getAbsLeft=i,t.parseSec=l},function(e,t){"use strict";function r(){return m()>.8?8*m()+11:6*m()+2}function n(){o.clearRect(0,-s.height/2,s.width,s.height);for(var e=0;e<c.length;e++){var t=c[e],r=t.getHeight();o.fillRect(e+c[e].xSpace,-r/2,c[e].width,r)}u||(d=requestAnimationFrame(n))}function a(e){var t=arguments.length<=1||void 0===arguments[1]?220:arguments[1],n=arguments.length<=2||void 0===arguments[2]?30:arguments[2],a=arguments.length<=3||void 0===arguments[3]?"#D94240":arguments[3];s=e,s.width=t,s.height=n,o=s.getContext("2d"),o.fillStyle=a,o.translate(0,n/2);for(var i=0;64>i;i++){var l=0==i?0:5*i,u={xSpace:l,width:1,getHeight:p(r())};c.push(u)}}function i(){u=!1,n()}function l(){u=!0}Object.defineProperty(t,"__esModule",{value:!0});var s,o,c=[],u=!1,d=null,m=Math.random,p=function(e){var t,r=1.5*e>28?28:1.5*e,n=1,a=m()>.5?1:-1,i=e;return function(){return t=a,i+=t,i>=r?(a*=-1,i=r):n>=i&&(a*=-1,i=n),m()>.9&&(a*=-1),i}};t.init=a,t.draw=i,t.stop=l}]);