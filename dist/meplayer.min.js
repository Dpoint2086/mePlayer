!function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){(function(t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e){return"string"==typeof e?document.querySelector(e):e.toString().includes("HTMLDivElement")?e:document.querySelector(".meplayer")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},l=r(1),s=r(2),o=n(s),c=r(3),u=n(c),d=r(4),m=n(d),p="object"==("undefined"==typeof window?"undefined":i(window))&&window.window===window?window:"object"==("undefined"==typeof t?"undefined":i(t))&&t.global===t?t:void 0;p.mePlayer=function(e){function t(){T.addEventListener("ended",function(){u.removeClass(S,"meplayer-isplaying")}),T.addEventListener("canplaythrough",function(){E=this.duration,setTimeout(function(){u.removeClass(S,"meplayer-isloading"),C.querySelector(".meplayer-duration-text").innerText=u.parseSec(E.toFixed(0))},1e3)}),T.addEventListener("durationchange",function(){E=this.duration}),T.addEventListener("timeupdate",function(){var e=T.currentTime.toFixed(0),t=T.currentTime.toFixed(3),r=100*(e/E);if(_.style.width=r.toFixed(2)+"%",L.innerText=u.parseSec(e),y&&d===l.THEME_DEFAULT){var n=o.currentIndex(t),a=M.querySelectorAll("p"),i=a[n-1],s=a[n],c=a[n+1];s.className.includes("meplayer-lyric-current")||(u.removeClass(M.querySelector(".meplayer-lyric-current"),"meplayer-lyric-current"),M.querySelector(".meplayer-lyric-pre")&&u.removeClass(M.querySelector(".meplayer-lyric-pre"),"meplayer-lyric-pre"),M.querySelector(".meplayer-lyric-next")&&u.removeClass(M.querySelector(".meplayer-lyric-next"),"meplayer-lyric-next"),u.addClass(s,"meplayer-lyric-current"),i&&u.addClass(i,"meplayer-lyric-pre"),c&&u.addClass(c,"meplayer-lyric-next"),M.style.webkitTransform="translateY(-"+20*n+"px)",M.style.transform="translateY(-"+20*n+"px)")}});var e;x.addEventListener("click",function(){T.paused?(T.play(),d!==l.THEME_DEFAULT||y||m.draw(),S.addEventListener("mousewheel",function(){var t=null,r=.05;return e=function(e){t&&clearTimeout(t),S.className.includes("meplayer-adjusting-volume")||u.addClass(S,"meplayer-adjusting-volume"),e.wheelDeltaY<0&&T.volume>r&&(T.volume-=r),e.wheelDeltaY>0&&T.volume<1-r&&(T.volume+=r),d===l.THEME_DEFAULT?b.style.width=100*T.volume+"%":q.querySelector("i").style.opacity=T.volume,e.preventDefault(),t=setTimeout(function(){u.removeClass(S,"meplayer-adjusting-volume")},1e3)}}())):(T.pause(),m.stop(),S.removeEventListener("mousewheel",e)),u.toggleClass(S,"meplayer-isplaying")}),w.addEventListener("click",function(e){var t=(e.pageX-u.getAbsLeft(this))/this.offsetWidth;_.style.width=100*t+"%",T.currentTime=(t*E).toFixed(0)})}function r(){T.paused&&T.play()}function n(){T.paused||T.pause()}function i(){function e(){r++,S.style.opacity-=t,S.style.opacity<=0&&(t*=-1,S.style.opacity=0,u.toggleClass(S,"meplayer-container-mini"),u.toggleClass(S,"meplayer-container")),S.style.opacity<1&&n>r?requestAnimationFrame(e):setTimeout(function(){u.removeClass(S,"meplayer-changing-theme")},500)}var t=.03,r=0,n=200;u.addClass(S,"meplayer-changing-theme"),d=d===l.THEME_DEFAULT?l.THEME_MINI:l.THEME_DEFAULT,e()}if(!e.music||!e.music.src)return void console.error("必须指定音乐地址哦~");var s=e.music,c=a(e.target),d=e.theme||l.THEME_DEFAULT,y=s.lrc?!0:!1,v=s.cover||"https://unsplash.it/78/?random",f=d===l.THEME_DEFAULT?"meplayer-container":"meplayer-container-mini",g=f+" "+(y?"meplayer-haslrc":"")+" meplayer-isloading",h='<div class="'+g+'">\n                             <audio src='+s.src+'></audio>\n                             <div class="meplayer-info">\n                             <div class="meplayer-info-cover"><img src='+v+' alt="cd-cover"></div>\n                             <div class="meplayer-meta">\n                             <div class="meplayer-meta-title">'+s.title+'</div>\n                             <div class="meplayer-meta-author">'+s.author+'</div>\n                             <div class="meplayer-meta-time-tick"><span class="meplayer-meta-time-tick-text"></span></div>\n                             </div>\n                             </div>\n                             <canvas class="meplayer-spectrum"></canvas>\n                             <div class="meplayer-lyric"><div class="meplayer-lyric-area"></div></div>\n                             <div class="meplayer-control"><div class="meplayer-control-play"><i class="icon-play"></i><i class="icon-pause"></i></div></div>\n                             <div class="meplayer-volume-bg"><div class="meplayer-volume"><i class="icon-volume"></i><div class="meplayer-volume-progress"></div></div></div>\n                             <div class="meplayer-duration"><i class="icon-clock"></i><span class="meplayer-duration-text">loading</span></div>\n                             <div class="meplayer-loadingsign"><i class="icon-spin animate-spin"></i>loading</div>\n                             <div class="meplayer-timeline-bg"><div class="meplayer-timeline"><div class="meplayer-timeline-passed"></div></div></div>\n                             </div>';c.innerHTML=h;var E,S=c.querySelector("."+f),T=c.querySelector("audio"),x=c.querySelector(".meplayer-control-play"),L=c.querySelector(".meplayer-meta-time-tick-text"),C=c.querySelector(".meplayer-duration"),w=c.querySelector(".meplayer-timeline"),_=c.querySelector(".meplayer-timeline-passed"),q=c.querySelector(".meplayer-volume"),b=c.querySelector(".meplayer-volume-progress"),M=c.querySelector(".meplayer-lyric-area"),A=c.querySelector(".meplayer-spectrum");T.preload="auto",y?o.parse(s.lrc).renderTo(M):m.init(A),t(),p.mePlayer={play:r,pause:n,toggleTheme:i}},"undefined"!=typeof e&&"undefined"!=typeof e.exports&&(e.exports=p.mePlayer)}).call(t,function(){return this}())},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="default",n="mini",a="meplayer-lyric-current",i="meplayer-lyric-next";t.THEME_DEFAULT=r,t.THEME_MINI=n,t.LYRIC_CURRENT_CLASS=a,t.LYRIC_NEXT_CLASS=i},function(e,t,r){"use strict";function n(e){for(var t=e.split("\n"),r=[],n=t.length,a=/\[(\d{2}):(\d{2})\.(\d{2,3})]/g,i=/\[(\d{2}):(\d{2})\.(\d{2,3})]/,s=0;n>s;s++){var o=t[s].match(a),c=t[s].replace(a,"").replace(/^\s+|\s+$/g,"");if(c&&null!=o)for(var u=o.length,d=0;u>d;d++){var m=i.exec(o[d]),p=60*m[1]+parseInt(m[2])+parseInt(m[3])/(2===(m[3]+"").length?100:1e3);r.push({time:p,text:c})}}return r.sort(function(e,t){return e.time-t.time}),l=r,this}function a(e){if(!l)return void console.error("未指定歌词文本！");for(var t="",r=0;r<l.length;r++)t+="<p>"+l[r].text+"</p>";return e.innerHTML=t,e.querySelector("p").className=s.LYRIC_CURRENT_CLASS,e.querySelector("p + p").className=s.LYRIC_NEXT_CLASS,this}function i(e){if(e<l[0].time)return 0;for(var t=0,r=l.length;r>t&&!(e>=l[t].time&&(!l[t+1]||e<=l[t+1].time));t++);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.currentIndex=t.renderTo=t.parse=void 0;var l,s=r(1);t.parse=n,t.renderTo=a,t.currentIndex=i},function(e,t){"use strict";function r(e,t){if(e.classList)e.classList.toggle(t);else{var r=e.className.split(" "),n=r.indexOf(t);n>=0?r.splice(n,1):r.push(t),e.className=r.join(" ")}}function n(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function a(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function i(e){for(var t=e.offsetLeft;e.offsetParent;)e=e.offsetParent,t+=e.offsetLeft;return t}function l(e){var t=(e/60).toFixed(0),r=(e%60).toFixed(0),n=10>t?"0"+t:t,a=10>r?"0"+r:r;return n+":"+a}Object.defineProperty(t,"__esModule",{value:!0}),t.toggleClass=r,t.addClass=n,t.removeClass=a,t.getAbsLeft=i,t.parseSec=l},function(e,t){"use strict";function r(){return m()>.8?8*m()+11:6*m()+2}function n(){o.clearRect(0,-s.height/2,s.width,s.height);for(var e=0;e<c.length;e++){var t=c[e],r=t.getHeight();o.fillRect(e+c[e].xSpace,-r/2,c[e].width,r)}u||(d=requestAnimationFrame(n))}function a(e){var t=arguments.length<=1||void 0===arguments[1]?220:arguments[1],n=arguments.length<=2||void 0===arguments[2]?30:arguments[2],a=arguments.length<=3||void 0===arguments[3]?"#D94240":arguments[3];s=e,s.width=t,s.height=n,o=s.getContext("2d"),o.fillStyle=a,o.translate(0,n/2);for(var i=0;64>i;i++){var l=0==i?0:5*i,u={xSpace:l,width:1,getHeight:p(r())};c.push(u)}}function i(){u=!1,n()}function l(){u=!0}Object.defineProperty(t,"__esModule",{value:!0});var s,o,c=[],u=!1,d=null,m=Math.random,p=function(e){var t,r=1.5*e>28?28:1.5*e,n=1,a=m()>.5?1:-1,i=e;return function(){return t=a,i+=t,i>=r?(a*=-1,i=r):n>=i&&(a*=-1,i=n),m()>.9&&(a*=-1),i}};t.init=a,t.draw=i,t.stop=l}]);